# 重构原则

## 何谓重构

重构（名词描述）：对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。

重构（动词描述）：使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构。

## 为何重构

* 重构改进软件设计

* 重构使软件更容易理解

* 重构帮助找到BUG

* 重构提高编程速度

## 何时重构

* 三次法则：事不过三，三则重构。（第一次做某件事时只管去做；第二次做类似的事会产生反感，但无论如何还是可以去做；第三次再做类似的事，你就应该重构。）

* 添加功能时重构：重构的直接原因是为了帮助我们理解需要修改的代码。

* 修补错误时重构：为了让代码更具可读性。

* 复审代码时重构：可以改善开发状况。

## 重构的难题

* 数据库：数据库结构往往是重构需要面临的最大难题。

* 修改接口：对于接口的修改要特别谨慎 - 如果接口被修改了，任何事情都可能发生。

* 难以通过重构手法完成的设计改动：某些核心设计决策无法修改。

* 何时不该重构：有时候既有代码实在太混乱，重构它还不如重新写一个来得简单。

## 重构与设计

重构与设计彼此互补。在重构时要关心应用程序的设计。

## 重构与性能

一个构造良好的应用程序要具备两点：

* 它让你有比较充裕的时间进行性能调整，因为有构造良好的代码在手，你就能够更快速地添加功能，也就有更多时间 用在性能问题上。

* 面对构造良好的程序，你在进行性能分析时便有较细的粒度，于是度量工具把你带入范围较小的程序段落中，而性能的调整也比较容易些。（由于代码更加清晰，因此你能够更好地理解自己的选择，更清楚哪种调整起关键作用。）

我发现重构可以帮助我们写出更快地软件。短期看来，重构的确可能使软件变慢，但它使优化阶段的软件性能调整更容易，最终还是会得到好的效果。






